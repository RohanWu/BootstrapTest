
<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <meta name="description" content="THIS IS FOR NCCUCS WEB PROGRAMMING.">
        <!-- BLOCK: FB OGP -->
        <meta property="og:title" content="Canvas with FB, the Extrodinary one">
        <meta property="og:type" content="website">
        <meta property="og:image" content="Yours">
        <meta property="og:url" content="http://rohanwu.github.io/wp2014s_hw4">
        <meta property="og:description" content="Wonder whether your photo is awesome or awful? Visit it, and you will get the door.">
        <!-- ENDBLOCK: FB OGP -->
    
        <link rel="stylesheet" href="css/style.css">
        
        <title>HTML5 Canvas with Facebook</title>
        
        <style>
            #canvas {border: 3px solid grey;}
        </style>
    </head>

    <body>
        
        <!-- BLOCK: FB SDK initialization -->
        <div id="fb-root"></div>
        <script>
            window.fbAsyncInit = function() {
                // Initialize the FB JS SDK
                FB.init({
                    appId      : '1458954511014492',    // App ID from the app dashboard
                    cookie     : true,                  // Allowed server-side to fetch fb auth cookie
                    status     : true,                  // Check Facebook Login status
                    xfbml      : true,                  // Look for social plugins on the page
                    version    : 'v2.0'
                });
                
                FB.ui({
                    method: 'share_open_graph',
                    action_type: 'og.likes',
                    action_properties: JSON.stringify({
                        object:'https://developers.facebook.com/docs/',
                    })
                }, function(response){
                        if (response && response.post_id) {
                            alert('Post was published.');
                            FB.getLoginStatus(function(response) {
                                statusChangeCallback(response);
                            });
                        } 
                        else {
                            alert('Post was not published.');
                            FB.getLoginStatus(function(response) {
                                statusChangeCallback(response);
                            });
                        }
                    }
                );
                
                // Additional initialization code such as adding Event Listeners goes here
                FB.getLoginStatus(function(response) {
                    statusChangeCallback(response);
                });
            };

            // Load the SDK asynchronously
            (function(d, s, id){
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {return;}
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/zh_TW/sdk.js#xfbml=1&appId=1458954511014492&version=v2.0";
                fjs.parentNode.insertBefore(js, fjs);
            }(document, 'script', 'facebook-jssdk'));
        
            function statusChangeCallback(response) {
                console.log('statusChangeCallback');
                console.log(response);
                // The response object is returned with a status field that lets the app know the current login status of the person.
                if (response.status === 'connected') {
                    // Logged into your app and Facebook.
                    photoAPI();
                } else if (response.status === 'not_authorized') {
                    // The person is logged into Facebook, but not your app.
                    document.getElementById('status').innerHTML = 'Please log ' + 'into this app.';
                } else {
                    // The person is not logged into Facebook, so we're not sure if
                    // they are logged into this app or not.
                    document.getElementById('status').innerHTML = 'Please log ' + 'into Facebook.';
                }
            }

            function photoAPI() {
                FB.api('/me/picture?width=250', function(response) {
                    var my_picture_url = response.data.url;
                    $("#my-profile-picture").attr('src', my_picture_url);
                });
            }
        </script>
        <!-- ENDBLOCK: FB SDK initialization -->

        <section id="main">
            <h2>This is a HTML5 Canvas Pages with Facebook</h2>
        
            <!-- BLOCK: Profile Area -->
            <div>
                <img id="my-profile-picture" alt="Your Photo">
            </div>
            <!-- ENDBLOCK: Profile Area -->

            <canvas width="540" height="540" id="canvas"></canvas>

            <!-- BLOCK: Social Plugins -->
            <div>
                <!-- Like and Share-->
                <div class="fb-like" data-href="http://rohanwu.github.io/BootstrapTest/" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

                <!-- Comments -->
                <div class="fb-comments" data-href="http://rohanwu.github.io/BootstrapTest/" data-numposts="5" data-colorscheme="light"></div>
            </div>
            <!-- ENDBLOCK: Social Plugins -->

        </section>
    
        <div class="inputtext" style="width:600px; margin:0 auto;">
            <label for="inputed">輸入客製化文字：
                <textarea name="inputed" maxlength="6" id="inputed" placeholder="限輸6字"></textarea><!-- 提供使用者輸入文字欄-->
            </label>
            <br/>
            <button id="sentimg" onClick="PostImageToFacebook()">Post to Facebook</button><!-- 傳送按鈕-->
        </div>
    
        <div class="info"></div><!-- 訊息欄位-->

        <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="js/script.js"></script>

    </body>

</html>
